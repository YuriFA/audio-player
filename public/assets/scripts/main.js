!function e(t,n,a){function i(o,u){if(!n[o]){if(!t[o]){var s="function"==typeof require&&require;if(!u&&s)return s(o,!0);if(r)return r(o,!0);throw new Error("Cannot find module '"+o+"'")}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n||e)},l,l.exports,e,t,n,a)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<a.length;o++)i(a[o]);return i}({1:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256;a(this,e),this.analyser=null,this.fFrequencyData=null,this.bFrequencyData=null,this.bTimeData=null,this.fftSize=n,this._context=t,this._create(),this.updateData()}return i(e,[{key:"_create",value:function(){return this.analyser=this._context.createAnalyser(),this.analyser.fftSize=this.fftSize,this.fFrequencyData=new Float32Array(this.analyser.frequencyBinCount),this.bFrequencyData=new Uint8Array(this.analyser.frequencyBinCount),this.bTimeData=new Uint8Array(this.analyser.frequencyBinCount),this}},{key:"updateData",value:function(){return this.analyser.getFloatFrequencyData(this.fFrequencyData),this.analyser.getByteFrequencyData(this.bFrequencyData),this.analyser.getByteTimeDomainData(this.bTimeData),this}}]),e}();n.default=r},{}],2:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=a(e("./Playlist")),c=(a(e("./Track")),a(e("./utils/EventEmmiter"))),f=a(e("./Equalizer")),h=a(e("./Analyser")),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.playlist=new l.default(e),a.muted=!1,a.currentTrackIndex=0,a.settings=n,a._playback={},a._resetPlaybackInfo(),a._setTrack(),a._ctx=null,a._gain=null,a._equalizer=null,a._analyser=null,a._createAudioApiNodes(),a}return u(t,c.default),s(t,[{key:"play",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.isPlaying)return this;this.currentTrackIndex=t||this.currentTrackIndex,this._playback.track&&this._playback.track.id===this.currentTrackIndex||this._setTrack();var n=this._playback.track;return console.log("Playing track id="+this.currentTrackIndex+" - "+n.src),n.audio&&n.isBuffered()?(n.audio.play(),this._playback.playing=!0):(n.load(),n.on("canplay",this._startPlayback.bind(this)),n.on("ended",this.playNext.bind(this)),n.on("progress",function(t){e.emit("track:progress",t)}),n.on("loadeddata",function(t){e.emit("track:loadeddata",t)}),n.on("canplaythrough",function(t){e.emit("track:canplaythrough",t)}),n.on("loadedmetadata",function(t){e.emit("track:loadedmetadata",t)}),n.on("timeupdate",function(t){e.emit("track:timeupdate",t)})),this}},{key:"stop",value:function(){this._playback.playing=!1;var e=this._playback.track;return e.audio.pause(),e.audio.currentTime=0,this}},{key:"pause",value:function(){return this._playback.playing=!1,this._playback.track.audio.pause(),console.log("PAUSED"),this}},{key:"mute",value:function(){return this._playback.track.muted=!0,this.muted=!0,this}},{key:"unmute",value:function(){return this._playback.track.muted=!1,this.muted=!1,this}},{key:"playNext",value:function(){return this.isPlaying&&this.stop(),this._resetPlaybackInfo(),this.currentTrackIndex+=1,this.play(),this}},{key:"playPrev",value:function(){return this.isPlaying&&this.stop(),this._resetPlaybackInfo(),this.currentTrackIndex-=1,this.play(),this}},{key:"rewind",value:function(e){if(e>1&&e<0)throw Error("To rewind audio, ratio must be in range from 0 to 1");var t=this._playback.track.audio;if(!isNaN(t.duration)){var n=t.duration*e;t.currentTime=n}return this}},{key:"_setTrack",value:function(){if(this.isPlaying)return this;console.log("Setting track",this.currentTrackIndex);try{this._playback.track=this.playlist.getTrack(this.currentTrackIndex)}catch(e){console.log(e),console.log("CurrentTrackIndex reseted to 0"),this.currentTrackIndex=0,this._playback.track=this.playlist.getTrack(this.currentTrackIndex)}return this}},{key:"_resetPlaybackInfo",value:function(){return this._playback={track:null,source:null,playing:!1},this}},{key:"_startPlayback",value:function(){if(this.isPlaying)return console.log("Already playing!1"),this;var e=this._playback,t=this._playback.track;return e.source=this._ctx.createMediaElementSource(t.audio),this._connectNodes(),console.log("Loaded - "+e.track.src),e.playing=!0,t.audio.play(),t.off("canplay",this._startPlayback.bind(this)),this}},{key:"_createAudioApiNodes",value:function(){if(window.AudioContext||window.webkitAudioContext)return this._ctx=new(window.AudioContext||window.webkitAudioContext),this._dest=this._ctx.destination,this._gain=this._ctx.createGain(),this._equalizer=this.settings.equalizer?new f.default(this._ctx):null,this._analyser=this.settings.analyser?new h.default(this._ctx):null,this}},{key:"_connectNodes",value:function(){var e=this._equalizer?this._equalizer.filters:[],t=this._analyser?this._analyser.analyser:null;return console.log(t),[this._playback.source].concat(i(e),[this._gain,t,this._dest]).filter(function(e){return e}).reduce(function(e,t){return e instanceof AudioNode&&t instanceof AudioNode&&e.connect(t),t}),this}},{key:"isPlaying",get:function(){return this._playback.playing}},{key:"isPaused",get:function(){return this._playback.track&&this._playback.track.paused}},{key:"volume",get:function(){return this._gain.gain.value},set:function(e){if(e>1&&e<0)throw Error("Volume must be in range from 0 to 1");0===e?this.mute():this.muted&&this.unmute(),this._gain.gain.value=e}},{key:"equalizer",get:function(){return this._equalizer}},{key:"analyser",get:function(){return this._analyser}}]),t}();n.default=d},{"./Analyser":1,"./Equalizer":3,"./Playlist":4,"./Track":5,"./utils/EventEmmiter":8}],3:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=e("./utils"),o=[{name:"Acoustic",data:[5,5,4,1,2,2,3,4,3,2]},{name:"Bass Booster",data:[6,5,4,3,2,0,0,0,0,0]},{name:"Bass Reducer",data:[-6,-5,-4,-3,-2,0,0,0,0,0]},{name:"Classical",data:[5,4,3,2,-1,-1,0,1,3,4]},{name:"Dance",data:[4,6,5,0,2,3,5,4,3,0]},{name:"Deep",data:[5,3,2,1,3,2,1,-2,-4,-5]},{name:"Electronic",data:[4,4,1,0,-2,2,1,2,4,5]},{name:"Hip-Hop",data:[5,3,1,3,-1,-1,1,-1,2,3]},{name:"Jazz",data:[4,3,1,2,-1,-1,0,1,3,4]},{name:"Latin",data:[5,3,0,0,-1,-1,-1,0,3,5]},{name:"Loudness",data:[6,4,0,0,-2,0,-1,-5,4,1]},{name:"Lounge",data:[-3,-2,-1,1,4,3,0,-1,2,1]},{name:"Piano",data:[3,2,0,2,3,1,3,5,3,4]},{name:"Pop",data:[-2,-1,0,2,4,4,2,0,-1,-2]},{name:"R&B",data:[2,7,6,1,-2,-1,2,3,3,4]},{name:"Rock",data:[5,4,3,2,-1,-2,0,2,3,4]},{name:"Small Speakers",data:[5,4,3,2,1,0,-2,-3,-4,-5]},{name:"Spoken Word",data:[-4,-1,0,1,3,5,5,4,2,0]},{name:"Treble Booster",data:[0,0,0,0,0,1,2,3,4,5]},{name:"Treble Reducer",data:[0,0,0,0,0,-1,-2,-3,-4,-5]},{name:"Vocal Booster",data:[-1,-3,-3,1,4,4,3,1,0,-1]}],u=[60,170,310,600,1e3,3e3,6e3,12e3,14e3,16e3],s=function(){function e(t){a(this,e),this.filters=[],this.presets=o,this._context=t,this._frequencies=u,this._createFilters()}return i(e,[{key:"changeFilterGain",value:function(e,t){return e in this.filters&&(this.filters[e].gain.value=(0,r.validateInRange)(t,-12,12)),this}},{key:"getFilterGain",value:function(e){return e in this.filters?this.filters[e].gain.value:null}},{key:"_createFilter",value:function(e){var t=this._context.createBiquadFilter();return t.type="peaking",t.frequency.value=e,t.Q.value=1,t.gain.value=0,t}},{key:"_createFilters",value:function(){var e=this._frequencies.map(this._createFilter.bind(this));return e.reduce(function(e,t){return e.connect(t),t}),this.filters=e,this}},{key:"frequencies",get:function(){return this._frequencies}}]),e}();n.default=s},{"./utils":11}],4:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(e("./Track")),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];a(this,e),this._tracks=[],this.addTrackList(t)}return r(e,[{key:"getTrack",value:function(e){var t=this._tracks[e];if(!t)throw Error("Track with id="+e+" dosen't exist in playlist");return t}},{key:"addTrack",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=new o.default(e,t,n);return this.tracks.push(a),this}},{key:"addTrackList",value:function(e){var t=this;e.forEach(function(e,n){if("string"==typeof e)t.addTrack(n,e);else if("object"===(void 0===e?"undefined":i(e))){var a=e.src,r=e.name;t.addTrack(n,a,r)}})}},{key:"tracks",get:function(){return this._tracks}}]),e}();n.default=u},{"./Track":5}],5:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=function(e){return e&&e.__esModule?e:{default:e}}(e("./utils/EventEmmiter")),s=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";a(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.id=e,o._src=n,o._name=r,o._audio=new Audio,o._bindEvents(),o}return r(t,u.default),o(t,[{key:"isBuffered",value:function(){return this._audio.buffered.length>0}},{key:"load",value:function(){return this._audio.crossOrigin="anonymous",this._audio.src=this._src,this._audio.load(),this}},{key:"_bindEvents",value:function(){var e=this;for(var t in this._audio)!function(t){0===t.search("on")&&e._audio.addEventListener(t.slice(2),function(n){e.emit(t.slice(2),n)})}(t)}},{key:"src",get:function(){return this._src}},{key:"name",get:function(){return this._name}},{key:"audio",get:function(){return this._audio}},{key:"muted",set:function(e){this._audio.muted=!!e}}]),t}();n.default=s},{"./utils/EventEmmiter":8}],6:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var i=a(e("./AudioPlayer")),r=a(e("./utils/RangeSlider")),o=e("./utils"),u=document.querySelector(".player-controls__btn_play"),s=document.querySelector(".player-controls__btn_next"),l=document.querySelector(".player-controls__btn_prev"),c=document.querySelector(".volume__btn"),f=document.querySelector(".volume__slider"),h=document.querySelector(".progress__bar"),d=document.querySelector(".player-controls__btn_equalizer"),y=document.querySelector(".equalizer-popup"),v=document.querySelectorAll(".equalizer-band__slider"),p=document.querySelector("#visualizer");p.width=document.body.clientWidth;var _=document.querySelector(".show_frequency"),m=["https://singles2017.s3.amazonaws.com/uploads/file1499697873293.mp3","https://singles2017.s3.amazonaws.com/uploads/file1496417854957.mp3","http://freshly-ground.com/data/audio/mpc/20090207%20-%20Loverman.mp3","./assets/media/Alex_Cohen_-_Good_Old_Times.mp3","./assets/media/RogerThat_-_Beautiful_Wonderful_Life.mp3","./assets/media/RogerThat_-_Lucky_Day.mp3","./assets/media/Roller_Genoa_-_Build_My_Gallows_High.mp3"],b=new i.default(m,{equalizer:!0,analyser:!0});b.volume=.1,_.addEventListener("click",function(e){var t=b.analyser.updateData().fFrequencyData.slice();console.log(t)});var g=function(e){var t=c.children[0];0===e&&(t.classList.remove("volume__icon_half"),t.classList.add("volume__icon_mute")),e>0&&e<=.5&&(t.classList.remove("volume__icon_mute"),t.classList.add("volume__icon_half")),e>.5&&(t.classList.remove("volume__icon_mute"),t.classList.remove("volume__icon_half")),b.volume=e},k=new r.default(f,{value:b.volume,onchange:g,onmove:g});c.addEventListener("click",function(e){e.preventDefault();var t=c.children[0];b.muted?(b.unmute(),t.classList.remove("volume__icon_mute")):(b.mute(),t.classList.add("volume__icon_mute"))});var w=function(e){e.preventDefault();var t=b.volume+.05*Math.sign(e.wheelDeltaY);k.setValue(t),g(t)};c.addEventListener("wheel",w),f.addEventListener("wheel",w);var E=new r.default(h,{handle:!1,buffer:!0,onchange:function(e){b.rewind(e)}}),T=function(e){var t=e.target,n=t.buffered,a=n.length?n.end(n.length-1)/t.duration:0;E.setBuffer(a)};b.on("track:progress",T),b.on("track:loadeddata",T),b.on("track:canplaythrough",T),b.on("track:timeupdate",function(e){var t=e.target,n=t.currentTime/t.duration;E.setValue(n)}),u.addEventListener("click",function(){b.isPlaying?(u.classList.remove("player-controls__btn_pause"),b.pause()):(u.classList.add("player-controls__btn_pause"),b.play(),x())}),s.addEventListener("click",function(){u.classList.add("player-controls__btn_pause"),b.playNext()}),l.addEventListener("click",function(){u.classList.add("player-controls__btn_pause"),b.playPrev()}),d.addEventListener("click",function(e){e.preventDefault(),y.classList.toggle("equalizer-popup__open")}),v.forEach(function(e,t){var n=b.equalizer.getFilterGain(t);new r.default(e,{vertical:!0,min:-12,max:12,value:n,onchange:function(e){b.equalizer.changeFilterGain(t,e)},onmove:function(e){b.equalizer.changeFilterGain(t,e)}})});var q=p.getContext("2d");q.strokeStyle="#FFFFFF",q.fillStyle="#FFFFFF",q.lineJoin="round",q.lineWidth=2;var P=p.width,O=p.height,x=function(){var e=b.analyser,t=e.analyser,n=(t.fftSize,t.minDecibels,t.maxDecibels,t.frequencyBinCount),a=P/2-150,i=180/(n-1),r=void 0;r||(r=requestAnimationFrame(function t(){q.clearRect(0,0,P,O);var u=e.updateData().fFrequencyData;q.beginPath();for(var s=0;s<n;s+=1){var l=s*i*Math.PI/180,c=150+.5*(u[s]+s),f=3*Math.sin(5*l)+5*Math.sin(5*l),h=(0,o.calcPolarCoords)(c+f,l);q.lineTo(a+h.x,300+h.y)}for(var d=n-1;d>=0;d-=1){var y=(360-d*i)*Math.PI/180,v=150+.5*(u[d]+d),p=3*Math.sin(5*y)+5*Math.sin(5*y),_=(0,o.calcPolarCoords)(v+p,y);q.lineTo(a+_.x,300+_.y)}q.stroke(),b.isPaused||cancelAnimationFrame(r),r=requestAnimationFrame(t)}))}},{"./AudioPlayer":2,"./utils":11,"./utils/RangeSlider":10}],7:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(){throw a(this,e),new Error("This is static class. Creating instances is forbidden.")}return i(e,null,[{key:"createElement",value:function(t,n){var a=n.attrs,i=n.text,r=n.callback,o=n.parent,u=document.createElement(""+t);return a&&e.insertAttributes(u,a),r&&r(u),i&&(u.innerHTML=i),o instanceof HTMLElement&&o.appendChild(u),u}},{key:"insertAttributes",value:function(e,t){e instanceof HTMLElement&&Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}}]),e}();n.default=r},{}],8:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(){a(this,e),this._events=[]}return i(e,[{key:"on",value:function(e,t){if(void 0===t)throw Error("You must provide a callback function");if("function"!=typeof t)throw Error("Callback must be a function");return this._events[e]=this._events[e]||[],this._events[e].push(t),this}},{key:"off",value:function(e,t){if(void 0===t)throw Error("You must provide a callback function");if("function"!=typeof t)throw Error("Callback must be a function");if(void 0===this._events[e])throw Error("Event not found");var n=this._events[e];return n.forEach(function(e,a){e.toString()===t.toString()&&n.splice(a,1)}),this}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,a=Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];if(void 0===e)throw Error("You must provide an event to emit");var r=this._events[e];return void 0!==r&&(r=r.slice()).forEach(function(e,n){e.apply(t,a)}),this}}]),e}();n.default=r},{}],9:[function(e,t,n){"use strict";Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),a=1;a<arguments.length;a++){var i=arguments[a];if(void 0!==i&&null!==i)for(var r=Object.keys(Object(i)),o=0,u=r.length;o<u;o++){var s=r[o],l=Object.getOwnPropertyDescriptor(i,s);void 0!==l&&l.enumerable&&(n[s]=i[s])}}return n}})},{}],10:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(e("./DOMBuilder")),o=e("./");e("./ObjectAssign");var u={min:0,max:1,value:0,vertical:!1,handle:!0,buffer:!1},s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),this.node=t,this.options=Object.assign(Object.assign({},u),n),this.track=null,this.fill=null,this.handle=null,this.buffer=null,this.vertical=this.options.vertical,this.min=this.options.min,this.max=this.options.max,this.length=Math.abs(this.min)+Math.abs(this.max),this.value=this.options.value,this.ratio=null,this.draggable=!1,this.onmove=this.options.onmove,this.onchange=this.options.onchange,this.node.ondragstart=function(){return!1},this._createDOM(),this._bindEvents(),this.setValue(this.value)}return i(e,[{key:"setValue",value:function(e){var t=(0,o.validateInRange)(e,this.min,this.max);return this.value=t,this.ratio=(this.value-this.min)/this.length,this._updateFill(),this}},{key:"setValueByRatio",value:function(e){var t=(0,o.validateInRange)(e,0,1);return this.ratio=t,this.value=this.min+this.ratio*this.length,this._updateFill(),this}},{key:"setBuffer",value:function(e){if(this.options.buffer){var t=(0,o.validateInRange)(e,0,1);this.vertical?this.buffer.style.height=100*t+"%":this.buffer.style.width=100*t+"%"}return this}},{key:"_updateFill",value:function(){return this.vertical?this.fill.style.height=100*this.ratio+"%":this.fill.style.width=100*this.ratio+"%",this}},{key:"_updateValue",value:function(e){var t=this.node.getBoundingClientRect(),n=null;return n=this.vertical?1-(e.clientY-t.top)/this.node.offsetHeight:(e.clientX-t.left)/this.node.offsetWidth,this.setValueByRatio(n),this}},{key:"_bindEvents",value:function(){var e=this;this.node.addEventListener("mousedown",function(t){1===t.which&&(e.draggable=!0,e._updateValue(t))}),document.addEventListener("mousemove",function(t){e.draggable&&(e._updateValue(t),(0,o.isFunction)(e.onmove)&&e.onmove(e.value))}),document.addEventListener("mouseup",function(t){e.draggable&&(e.draggable=!1,e._updateValue(t),(0,o.isFunction)(e.onchange)&&e.onchange(e.value))})}},{key:"_createDOM",value:function(){var e=this.vertical?"slider-vert":"slider-horiz";this.node.classList.add(e),this.track=r.default.createElement("div",{attrs:{class:e+"__track"},parent:this.node}),this.fill=r.default.createElement("div",{attrs:{class:e+"__filled"},parent:this.track}),this.options.handle&&(this.handle=r.default.createElement("div",{attrs:{class:e+"__handle"},parent:this.fill})),this.options.buffer&&(this.buffer=r.default.createElement("div",{attrs:{class:e+"__buffer"},parent:this.track}))}}]),e}();n.default=s},{"./":11,"./DOMBuilder":7,"./ObjectAssign":9}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isFunction=function(e){var t={};return e&&"[object Function]"===t.toString.call(e)},n.validateInRange=function(e,t,n){return n&&e>n?n:t&&e<t?t:e},n.roundedRect=function(e){var t=e.ctx,n=e.x,a=e.y,i=e.width,r=e.height,o=e.radius,u=e.fill,s=void 0!==u&&u,l=e.stroke,c=void 0===l||l,f={tl:0,tr:0,br:0,bl:0};"number"==typeof o?Object.keys(f).forEach(function(e){f[e]=o}):Object.assign(f,o),t.beginPath(),t.moveTo(n+f.tl,a),t.lineTo(n+(i-f.tr),a),t.quadraticCurveTo(n+i,a,n+i,a+f.tr),t.lineTo(n+i,a+(r-f.br)),t.quadraticCurveTo(n+i,a+r,n+(i-f.br),a+r),t.lineTo(n+f.bl,a+r),t.quadraticCurveTo(n,a+r,n,a+(r-f.bl)),t.lineTo(n,a+f.tl),t.quadraticCurveTo(n,a,n+f.tl,a),t.closePath(),s&&t.fill(),c&&t.stroke()},n.calcPolarCoords=function(e,t){return{x:e*Math.cos(t),y:e*Math.sin(t)}},e("./ObjectAssign")},{"./ObjectAssign":9}]},{},[6]);